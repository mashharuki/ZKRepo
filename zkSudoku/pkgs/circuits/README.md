# サーキット用のディレクトリ

※開発用！！※

## コマンド

- サーキットのコンパイル

  ```bash
  yarn compile
  ```

  実行結果例

  ```bash
  template instances: 7
  non-linear constraints: 6480
  linear constraints: 0
  public inputs: 81
  public outputs: 0
  private inputs: 81
  private outputs: 0
  wires: 6319
  labels: 12232
  Written successfully: ./sudoku.r1cs
  Written successfully: ./sudoku.sym
  Written successfully: ./sudoku_cpp/sudoku.cpp and ./sudoku_cpp/sudoku.dat
  Written successfully: ./sudoku_cpp/main.cpp, circom.hpp, calcwit.hpp, calcwit.cpp, fr.hpp, fr.cpp, fr.asm and Makefile
  Written successfully: ./sudoku_js/sudoku.wasm
  Everything went okay, circom safe
  ✨  Done in 0.33s.
  ```

- witness ファイルの作成

  ```bash
  yarn generateWitness
  ```

  実行結果

  ```bash
  template instances: 7
  non-linear constraints: 6480
  linear constraints: 0
  public inputs: 81
  public outputs: 0
  private inputs: 81
  private outputs: 0
  wires: 6319
  labels: 12232
  Written successfully: ./sudoku.r1cs
  Written successfully: ./sudoku.sym
  Written successfully: ./sudoku_cpp/sudoku.cpp and ./sudoku_cpp/sudoku.dat
  Written successfully: ./sudoku_cpp/main.cpp, circom.hpp, calcwit.hpp, calcwit.cpp, fr.hpp, fr.cpp, fr.asm and Makefile
  Written successfully: ./sudoku_js/sudoku.wasm
  Everything went okay, circom safe
  ✨  Done in 0.74s.
  ```

- 検証用の`solidity`ファイルを出力をまでを行う

  ```bash
  yarn executeGroth16
  ```

  実行結果例

  ```bash
  ----- powersOfTau28_hez_final_14.ptau already exists -----
  template instances: 7
  non-linear constraints: 6480
  linear constraints: 0
  public inputs: 81
  public outputs: 0
  private inputs: 81
  private outputs: 0
  wires: 6319
  labels: 12232
  Written successfully: ./sudoku.r1cs
  Written successfully: ./sudoku.sym
  Written successfully: ./sudoku_cpp/sudoku.cpp and ./sudoku_cpp/sudoku.dat
  Written successfully: ./sudoku_cpp/main.cpp, circom.hpp, calcwit.hpp, calcwit.cpp, fr.hpp, fr.cpp, fr.asm and Makefile
  Written successfully: ./sudoku_js/sudoku.wasm
  Everything went okay, circom safe
  ----- Generate .zkey file -----
  [INFO]  snarkJS: Reading r1cs
  [INFO]  snarkJS: Reading tauG1
  [INFO]  snarkJS: Reading tauG2
  [INFO]  snarkJS: Reading alphatauG1
  [INFO]  snarkJS: Reading betatauG1
  [INFO]  snarkJS: Circuit hash:
                  66d3afe0 242eff36 3676f541 cdcb4e09
                  33ced63f 24a98b6d fc2c592a d4a35490
                  7e6371b6 610c955d 1457d07c 83b6ab55
                  671c923e c2028671 2ee8c8eb 665b1c1e
  ----- Contribute to the phase 2 of the ceremony -----
  [DEBUG] snarkJS: Applying key: L Section: 0/6237
  [DEBUG] snarkJS: Applying key: H Section: 0/8192
  [INFO]  snarkJS: Circuit Hash:
                  66d3afe0 242eff36 3676f541 cdcb4e09
                  33ced63f 24a98b6d fc2c592a d4a35490
                  7e6371b6 610c955d 1457d07c 83b6ab55
                  671c923e c2028671 2ee8c8eb 665b1c1e
  [INFO]  snarkJS: Contribution Hash:
                  16ba6681 a06ef73b eb07c3de 7b3a3bd9
                  aba9646d 4a6ed4c1 f144f72f 52a901cc
                  1be3d7b7 bf36c591 b31aebe6 9d035b3d
                  41249e83 88db24f8 f80f5206 4b281c0d
  ----- Export the verification key -----
  ----- Generate zk-proof -----
  ----- Verify the proof -----
  [INFO]  snarkJS: OK!
  ----- Generate Solidity verifier -----
  ----- Generate and print parameters of call -----
  ["0x1e7bd60e627755cd8a2f85c1235f143f41b264155ba901682a0338b93286499a", "0x1e74fedda464ad296a109e4c91b523f4f273efc04b84f3bbfb03a9af522ff604"],[["0x0c7cec8841b4c2498623d1a2414259d6207f2ef027177608f5446eca073e3ecf", "0x18e8253ec0492ba8492df3f6aaf6a8c2727a32f2f1ba4a435c5c3238571dcf5a"],["0x1c7522b3f19df9a4ab65a1896cd2989a60b097147343f57f0359c50303748e00", "0x1b6a22ba5d9187a1385737ffea562a6a504abf96ed0de7993aa259273581c54e"]],["0x05569e87a47d859ca3e8f1740165dc8caba8d9f21c3061a03753bc63773348bc", "0x295977495b35ed1c90bf97c7a5254fe0826350b8f6d252ee23726318b319f7f4"],["0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000006","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000007","0x0000000000000000000000000000000000000000000000000000000000000002","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000008","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000009","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000006","0x0000000000000000000000000000000000000000000000000000000000000008","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000001","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000003","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000007","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000002","0x0000000000000000000000000000000000000000000000000000000000000009","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000004","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000005","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000007","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000006","0x0000000000000000000000000000000000000000000000000000000000000005","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000001","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000008","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000001","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000005","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000003","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000007","0x0000000000000000000000000000000000000000000000000000000000000009","0x0000000000000000000000000000000000000000000000000000000000000002","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000004"]
  ✨  Done in 21.35s.
  ```

- サーキットのテスト

  ```bash
  yarn test
  ```

  実行結果

  ```bash
  $ mocha


  Sudoku circuit
    ✔ Should generate the witness successfully
    ✔ Should fail because there is a number out of bounds
    ✔ Should fail because unsolved is not the initial state of solved
    ✔ Should fail due to repeated numbers in a row
    ✔ Should fail due to repeated numbers in a column
    ✔ Should fail due to repeated numbers in a square


  6 passing (331ms)

  ✨  Done in 0.71s.
  ```
